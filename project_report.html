<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Project Report</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/sandstone.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 61px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h2 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h3 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h4 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h5 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h6 {
  padding-top: 66px;
  margin-top: -66px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Exploratory Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="smm2.html">Severe Maternal Morbidity</a>
    </li>
    <li>
      <a href="preterm_births.html">Preterm Births</a>
    </li>
    <li>
      <a href="gonorrhea.html">Gonorrhea</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    NYC Maps
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="nyc_maternal_mapfinal/index.html">Maps</a>
    </li>
    <li>
      <a href="map_discussion.html">Discussion of Maps</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Regression Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="regression_summary.html">Summary</a>
    </li>
    <li>
      <a href="smm_reg.html">Severe Maternal Morbidity</a>
    </li>
    <li>
      <a href="preterm_reg.html">Preterm Births</a>
    </li>
    <li>
      <a href="gonorrhea_reg.html">Gonorrhea</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="project_report.html">Project Report</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="about_project.html">The Project</a>
    </li>
    <li>
      <a href="team.html">The Team</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://www.youtube.com/watch?v=hoJ5Jc2OhsE">
    <span class="fa fa-youtube fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/shelley-shen/nycmaternalhealth">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Project Report</h1>

</div>


<p><br></p>
<style type="text/css">

h1.title {text-align: center;}

</style>
<p><img src="images/rephealth_image1.jpg" style="width:75%" class="center"></p>
<p><br></p>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Severe maternal morbidity (SMM) includes health outcomes during labor and delivery that may result in both short-term and/or long term health consequences for women. New York City’s rate of SMM increased 28.2 % from 2008 to 2012. Preterm births, when infants are born prior to 37 weeks of gestation, can place the mother at increased risk of physical and mental health complications as well as decreased bonding with the baby. Additionally, STI’s pose a general threat of infection to mothers and infants. Some of the factors contributing to high rates of SMM, preterm births, and STI’s in New York City include access to reproductive health services, health insurance coverage, neighborhood poverty level, education, and race. We will examine these factors that may contribute to the poor maternal health outcomes in New York City. In regards to STI’s in our assessment of reproductive health in NYC, we will choose to focus specifically on gonorrhea as it provides considerable risk to pregnant mothers and newborn babies and is among the most infectious of STI’s <a href="https://www.mayoclinic.org/diseases-conditions/gonorrhea/symptoms-causes/syc-20351774#:~:text=Gonorrhea%20is%20an%20infection%20caused,vaginal%2C%20oral%20or%20anal%20sex">1</a>.</p>
<p>Additional background information regarding our outcomes of interest can be found in our About section under <a href="about_project.html">The Project</a>. <br></p>
</div>
<div id="inspiration" class="section level2">
<h2>Inspiration</h2>
<p>The following resources are part of the inspiration behind this project:</p>
<ul>
<li><a href="https://www.nytimes.com/2018/04/11/magazine/black-mothers-babies-death-maternal-mortality.html">“Why America’s Black Mothers and Babies Are in a Life-or-Death Crisis.”</a> <em>New York Times</em>. April 11, 2018.</li>
<li><a href="https://dcmaternalhealth.com/2020-summit/">2020 Maternal &amp; Infant Health Summit</a> hosted by Mayor Muriel Bowser’s Maternal &amp; Infant Health Initiative. September 15-18, 2020.</li>
</ul>
</div>
<div id="questions" class="section level2">
<h2>Questions</h2>
<p>Among neighborhoods in NYC…</p>
<div id="exploratory-analysis" class="section level4">
<h4>Exploratory Analysis</h4>
<ul>
<li>How does access to reproductive services impact maternal health and levels of STIs?</li>
<li>How does insurance coverage affect maternal health and levels of STIs?</li>
<li>How is the relationship between maternal &amp; reproductive outcomes and access to healthcare affected by factors like neighborhood racial composition, poverty and education?</li>
</ul>
</div>
<div id="neighborhood-level-maps" class="section level4">
<h4>Neighborhood-Level Maps</h4>
<ul>
<li>Spatial distributions of key demographic and socioeconomic predictors of maternal and reproductive among NYC neighborhoods</li>
<li>Neighborhood clustering patterns to identify areas of particularly high or low risk</li>
</ul>
</div>
<div id="regression-models" class="section level4">
<h4>Regression Models</h4>
<ul>
<li>How do maternal and reproductive health outcomes correlate with demographic, socioeconomic, and healthcare access factors?</li>
<li>Can we build accurate estimation models to quantify the relationship between health outcomes and their potential protective &amp; risk factors?</li>
</ul>
<p>Note: our questions did not change over time, but they did become more granular as we dug deeper into our data. <br></p>
</div>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<div id="source-nyc-neighborhood-health-atlas" class="section level4">
<h4><strong>Source:</strong>  <a href="https://www1.nyc.gov/site/doh/health/neighborhood-health/nyc-neighborhood-health-atlas.page">NYC Neighborhood Health Atlas</a></h4>
<p><br></p>
</div>
<div id="variables-of-interest" class="section level3">
<h3><em>Variables of interest</em></h3>
<div id="outcomes" class="section level4">
<h4><strong>Outcomes:</strong></h4>
<ul>
<li><code>preterm_births</code>: percent preterm births (&lt;37 weeks gestation) among all live births in 2010-2014</li>
<li><code>smm</code>: crude rate of severe maternal morbidity (SMM) per 10,000 deliveries in 2008-2012</li>
<li><code>gonorrhea</code>: crude rate of gonorrhea cases diagnosed per 100,000 people of all ages in 2014-2015</li>
</ul>
</div>
<div id="potential-predictors" class="section level4">
<h4><strong>Potential Predictors:</strong></h4>
<ul>
<li><code>total_pop</code>: total population</li>
<li><code>female</code>: percent of female population in 2010-2014</li>
<li><code>foreign_born</code>: percent of population born outside the US or US territories</li>
<li><code>limited_eng</code>: percent of population 5 years and older who report that they speak English “less than very well”</li>
<li><code>unemployment</code>: percent of the civilian (non-military) labor force ages 16 and older who are unemployed in 2010-2014</li>
<li><code>health_ins</code>: percent of civilian non-institutionalized population with health insurance in 2010-2014</li>
<li><code>medicaid_enroll</code>: percent of population continuously enrolled (for 11 months or more) in Medicaid in 2015</li>
<li><code>late_no_prenatal_care</code>: percent of live births receiving late prenatal care or no prenatal care at all in 2010-2014</li>
<li><code>race</code>: various race variables were re-categorized into a single variable with four categories: black, hispanic, white, and other</li>
<li><code>poverty</code>: percent of population all ages living below the federal poverty level. This variable was re-categorized into five levels during our exploratory analyses:</li>
<li><code>education</code>: percent of population ages 25 and older whose highest level of education is less than a high school diploma or GED</li>
<li><code>non_pcmd</code>: number of non-primary care providers in 2014</li>
<li><code>clinics_and_chc_density</code>: clinic &amp; community health centers per 10,000 people in 2014</li>
<li><code>non_pcmd_density</code>: non-primary care providers (specialists like ob-gyns) per 10,000 people</li>
</ul>
<p><br></p>
</div>
</div>
</div>
<div id="data-tidying" class="section level2">
<h2>Data Tidying</h2>
<p>The following steps were taken to clean the NYC NTA data:</p>
<ul>
<li>Clean names to improve readability</li>
<li>Select relevant predictors &amp; outcomes (demographics, SES, health outcomes, insurance status, number of providers)</li>
<li>Drop neighborhoods that have no residential population (i.e. LaGuardia airport)</li>
<li>Drop observation representing NYC aggregated</li>
<li>Remove variables corresponding to 95% CI and reliability metrics of measurements</li>
<li>Create new variable <code>clinics_and_chc_count</code> representing aggregated clinic and community health centers to reduce multicollinearity</li>
<li>Create new variables adjusting number of healthcare providers by neighborhood population
<ul>
<li><code>clinics_and_chc_density</code>: clinic &amp; community health centers per 10,000 people</li>
<li><code>non_pcmd_density</code>: non-primary care providers (specialists like ob-gyns) per 10,000 people</li>
</ul></li>
<li>Renamed variables for ease of reading</li>
<li>Combined Asians into the ‘other’ race category</li>
<li>Saved cleaned dataset to CSV to improve portability across users &amp; programs</li>
</ul>
<pre class="r"><code>project_df = read_excel(&quot;./data/nta-metadata.xlsx&quot;, sheet = &quot;NTA Data&quot;) %&gt;%
  janitor::clean_names() %&gt;%
  dplyr::select(
    nta_name:female, 
    hispanic:limited_eng,
    edu_less_than_hs:poverty,
    unemployment,
    preterm_births:smm_reliability, 
    gonorrhea, 
    health_ins, 
    medicaid_enroll, 
    late_no_prenatal_care, 
    clinics, 
    community_health_centers, 
    non_pcmd, 
    -contains(&quot;95cl&quot;), 
    -contains(&quot;reliability&quot;)) %&gt;%
  mutate(clinics_and_chc_count = clinics + community_health_centers,
         clinics_and_chc_density = ((clinics + community_health_centers)/total_pop)*10000,
         non_pcmd_density = (non_pcmd/total_pop)*10000,
         other = (asian_pi + other_race)) %&gt;%
  rename(
    white = white_non_hisp,
    black = black_non_hisp,
    education = edu_less_than_hs) %&gt;% 
  relocate(other, .after = black) %&gt;% 
  select(-asian_pi, -other_race) %&gt;% 
  drop_na(total_pop) %&gt;%
  filter(nta_code != &#39;NYC&#39;)

write.csv(project_df, &#39;data/clean_dataset.csv&#39;, row.names = FALSE)</code></pre>
<p>Our final dataset contained data from 188 neighborhoods in New York City, defined by Neighborhood Tabulation Areas (NTAs), which were generated from 2010 US Census data</p>
</div>
<div id="methods" class="section level2">
<h2>Methods</h2>
<p>In this section, we discuss the analyses we completed.</p>
<div id="exploratory-analysis-1" class="section level3">
<h3>Exploratory Analysis</h3>
<p>We used data visualizations to conduct some exploratory analysis of our outcomes and predictors to identify any preliminary trends. We approached this by separating the three primary outcomes (SMM, preterm births, and gonorrhea) and selected various predictors based on literature to further examine their relationships. In order to create the plots, we first took our clean data set and restructured the poverty and race predictors into categorical variables. Then, for each outcome we created scatter plots against predictors such as race, poverty, prenatal care, health insurance, medicaid enrollment, and education. For gonorrhea, we also investigated its relationship with education, stratified by race. Similarly, we investigated SMM and prenatal care, stratified by race.</p>
<pre class="r"><code>plots_df = read_csv(&quot;./data/clean_dataset.csv&quot;) %&gt;%
  mutate(
    poverty_level = cut(poverty, breaks = c(-Inf, 10, 20, 30, 40, Inf), 
    labels = c(&quot;poverty_10&quot;,&quot;poverty_20&quot;, &quot;poverty_30&quot;, &quot;poverty_40&quot;, &quot;poverty_40+&quot;))) %&gt;% 
  pivot_longer(
   cols = hispanic:other,
   names_to = &quot;race&quot;,
   values_to = &quot;percent_pop&quot;,
   values_drop_na = TRUE
 ) </code></pre>
</div>
<div id="neighborhood-level-maps-1" class="section level3">
<h3>Neighborhood-Level Maps</h3>
<p>We used Geographic Information System(GIS) to join our two datasets, overlaying the NYC Neighborhood Health Atlas data to the NTA shapefile. Using QGIS, we created several maps portraying the distribution of our outcomes and hypothesized predictors, the darker colors representing higher rates. Our interactive web map allows us to assess each outcome individually and clearly see high(darker colors) and low(lighter colors) rates.The points for Neighborhood Tabulation Area provides us with an overall summary of Percent of Black-identifying population, percent in poverty and the crude rate of SMM. We used Local Indicators of Spatial Association(LISA) Clusters within GeoDA, which allowed us to map the categorization of significant spatial clusters. The high cluster areas represent NTAs with statistically significant clusters of high SMM rates and the low cluster areas represent NTAs with statistically significant clusters of low SMM rates. Cluster analysis allowed us to visually check for an association between our predictors and outcome SMM.</p>
</div>
<div id="regression-models-1" class="section level3">
<h3>Regression Models</h3>
<div id="severe-maternal-morbidity" class="section level4">
<h4>Severe Maternal Morbidity</h4>
</div>
<div id="linear-regression-model" class="section level4">
<h4>Linear Regression Model</h4>
<p>We fit a linear model to the severe maternal morbidity outcome using our stepwise AIC automatic feature selection algorithm. Next, we’ll take a look at the chosen predictors, effect measures, and run regression diagnostics.</p>
<pre class="r"><code>#Combined predictors with SMM outcome
predictor_df = read.csv(&quot;./data/predictors.csv&quot;)
outcome_df = read.csv(&quot;./data/outcomes.csv&quot;)
smm_df = predictor_df %&gt;% 
  mutate(smm = outcome_df$smm)

#Fit the full model 
full_smm_linear.model &lt;- lm(smm~., data = smm_df)
#Stepwise regression model
step_smm_linear.model &lt;- stepAIC(full_smm_linear.model, direction = &quot;both&quot;, 
                      trace = FALSE)

#Display converged model
step_smm_linear.model %&gt;% 
  broom::tidy() %&gt;%
  knitr::kable(digits = 3)</code></pre>
<p>The variables female, hispanic, white, black, foreign_born, limited_eng, education, unemployment, late_no_prenatal_care, and clinics_and_chc_density were chosen in the final model. The model has an R-squared value of 0.7602807, representing a reasonably good fit.</p>
<p>However, we were concerned about our assumptions for linear regression, so they need to be checked before we can interpret any results.</p>
<pre class="r"><code>#Regression diagnostics
plot(step_smm_linear.model)</code></pre>
<p><img src="project_report_files/figure-html/unnamed-chunk-4-1.png" width="100%" /><img src="project_report_files/figure-html/unnamed-chunk-4-2.png" width="100%" /><img src="project_report_files/figure-html/unnamed-chunk-4-3.png" width="100%" /><img src="project_report_files/figure-html/unnamed-chunk-4-4.png" width="100%" /></p>
<pre class="r"><code>#Shapiro test
smm_linear_shapiro = shapiro.test(residuals(step_smm_linear.model))</code></pre>
<p>The Normal Q-Q plot has fat tails, suggesting violation of the normality assumption. This is confirmed with the Shapiro-Wilk test for normality, which has a p-value of 0.0019526. The plot of residuals vs fitted values is non-random, suggesting a violation of the homoskedasticity assumption, also indicated by the scale-location plot, where the line is not straight. There’s also an unequal distribution of leverage among points (though likely not significant), and a few potential outliers.</p>
<p>It’s possible that the model is still valid - let’s try something else though!</p>
</div>
<div id="poisson-regression-model" class="section level4">
<h4>Poisson Regression Model</h4>
<p>Because our outcome variable, severe maternal morbidity rate is really a count variable (number of cases) made into a rate by dividing by total population (another variable in our dataset), we can fit Poisson regression to model the outcome.</p>
<pre class="r"><code>full_smm_poisson.model &lt;- glm(smm~., data=smm_df, family=poisson(link = &quot;log&quot;))

step_smm_poisson.model &lt;- stepAIC(full_smm_poisson.model, direction = &quot;both&quot;, 
                      trace = FALSE)

#Display converged model
step_smm_poisson.model %&gt;% 
  broom::tidy() %&gt;%
  knitr::kable(digits = 3)</code></pre>
<p>Our Poisson model failed to converge, which is why it appears all predictors were selected in the final model. A closer look at the regression output shows that this is because the model is overdispersed, violating one of the key assumptions of Poisson regression.</p>
</div>
<div id="negative-binomial-regression-model" class="section level4">
<h4>Negative Binomial Regression Model</h4>
<p>To address that, we will use a negative binomial model, an expansion on the Poisson model that adds a dispersion parameter alpha that can account for overdispersion.</p>
<pre class="r"><code>full_smm_neg_bin.model &lt;- glm.nb(smm~., data=smm_df)

step_smm_neg_bin.model &lt;- stepAIC(full_smm_neg_bin.model, direction = &quot;both&quot;, 
                      trace = FALSE)

#Display converged model
step_smm_neg_bin.model %&gt;% 
  broom::tidy() %&gt;%
  knitr::kable(digits = 3)</code></pre>
<p>The negative binomial model selection process has yielded a more parsimonious set of predictors, including 8 predictors: hispanic, white, other, foreign_born, unemployment, medicaid_enroll, late_no_prenatal_care and clinics_and_chc_density.</p>
<p>This model is more parsimonious, and satisfies assumptions, which is not necessarily true for the linear and Poisson models. Let’s compare the three models we’ve already built, and just for kicks, a negative binomial regression with variables selected through literature review &amp; causal theory.</p>
<p>The predictors we’ll use in our model are: late_no_prenatal_care, clinics_and_chc_density, medicaid_enroll, hispanic percent population, and black percent population.</p>
<pre class="r"><code>theory_smm_neg_bin.model &lt;- glm.nb(smm~ late_no_prenatal_care + clinics_and_chc_density + medicaid_enroll + hispanic + black, data=smm_df)

#Display converged model
theory_smm_neg_bin.model %&gt;% 
  broom::tidy() %&gt;%
  knitr::kable(digits = 3)</code></pre>
<p>Let’s compare all four models using AIC and discuss the implications of these values.</p>
<ul>
<li>Linear: AIC = 1950.0754887</li>
<li>Poisson: AIC = Inf</li>
<li>Negative binomial: AIC = 1908.2102369</li>
<li>Our model: AIC = 1916.7557983</li>
</ul>
<p>Though the automatically generated negative binomial model has the lowest AIC and is therefore the “winning” model, it’s important to note that our curated model is not far behind. Our curated model is also more parsimonious, contains fewer highly correlated predictors, and fits well with the existing body of literature on severe maternal morbidity, all of which are benefits difficult to quantify with a metric like AIC.</p>
</div>
<div id="discussion" class="section level4">
<h4>Discussion</h4>
<p>Because of correlation between many predictors, we should assess for multicollinearity in our fitted model using condition indexes and a variance decomposition matrix.</p>
<pre class="r"><code>smm_coll = colldiag(step_smm_neg_bin.model)

knitr::kable(list(smm_coll$condindx, smm_coll$pi))</code></pre>
<p>As we suspected, there is some degree of collinearity in our model, indicated by condition indices between 10 and 30. However, it is not extreme and seems to be strongly related to the predictor of white population proportion. We will be careful not to interpret that predictor independently.</p>
<p>As a result, we can safely say that a model containing hispanic, white, other, foreign_born, unemployment, medicaid_enroll, late_no_prenatal_care and clinics_and_chc_density is the best set of predictors for neighborhood-level severe maternal morbidity.</p>
</div>
<div id="preterm-births" class="section level4">
<h4>Preterm Births</h4>
<p>Let’s start by fitting a linear model to the preterm births outcome using a stepwise selection process (with AIC as metric). Next, we’ll take a look at the chosen predictors, effect measures, and run regression diagnostics of our converged model.</p>
<pre class="r"><code>#read in cleaned csv files
predictors_df = read.csv(&quot;./data/predictors.csv&quot;)
outcome_df = read.csv(&quot;./data/outcomes.csv&quot;)

#Combined predictors with preterm births outcome
preterm_linear_df = predictors_df %&gt;% 
  mutate(preterm_births = outcome_df$preterm_births)

#Fit the full model 
full_preterm_linear.model &lt;- lm(preterm_births~., data = preterm_linear_df)
#Stepwise regression model
step_preterm_linear.model &lt;- stepAIC(full_preterm_linear.model, direction = &quot;both&quot;, 
                      trace = FALSE)


#Display converged model
step_preterm_linear.model %&gt;% 
  broom::tidy() %&gt;%
  knitr::kable(digits = 3)</code></pre>
<p>The 6 variables hispanic, black, limited_eng, health_ins, late_no_prenatal_care, and non_pcmd_density were chosen in the final model. The model has an R-squared value of 0.6461531, representing a decent fit. This is unsurprisingly given the complex web of factors that contribute to high preterm birth rates.</p>
<p>However, we were concerned about our assumptions for linear regression, so they need to be checked before we can interpret any results.</p>
<pre class="r"><code>#Regression diagnostics
plot(step_preterm_linear.model)</code></pre>
<p><img src="project_report_files/figure-html/unnamed-chunk-10-1.png" width="100%" /><img src="project_report_files/figure-html/unnamed-chunk-10-2.png" width="100%" /><img src="project_report_files/figure-html/unnamed-chunk-10-3.png" width="100%" /><img src="project_report_files/figure-html/unnamed-chunk-10-4.png" width="100%" /></p>
<pre class="r"><code>#Shapiro test
preterm_linear_shapiro = shapiro.test(residuals(step_preterm_linear.model))</code></pre>
<p>The linear regression assumptions are satisfied, so this is a valid model. The Normal Q-Q plot is reasonably well fit, and Shapiro-Wilk test for normality, which has a p-value of 0.2584184, confirms the normality assumption. The data also roughly follows the homoskedasticity assumption, with a few potential outliers right at 3 standard deviations and potential influential points. Though several point has high leverage, it is not higher than our rule-of-thumb threshold of 0.074. This is calculated using the rule of thumb equation 2(p + 1)/n, where p is the number of predictors and n the number of observations.</p>
<p>These results are valid, so we can interpret them! Because we prioritize simple intuitive models, we’ll use our valid linear regression model.</p>
</div>
<div id="discussion-1" class="section level4">
<h4>Discussion</h4>
<p>Our final model consists of the 6 predictors hispanic, black, limited_eng, health_ins, late_no_prenatal_care, and non_pcmd_density.</p>
<p>Because of correlation between many predictors, we should assess for multicollinearity in our fitted model using condition indexes and a variance decomposition matrix.</p>
<pre class="r"><code>preterm_coll = colldiag(step_preterm_linear.model)

knitr::kable(list(preterm_coll$condindx, preterm_coll$pi))</code></pre>
<p>As we suspected, there is some collinearity indicated by a single high condition index and unsurprisingly given the correlation matrix we visualized between predictors. However, nearly all of the variation seems to be attributed to the health insurance predictor, with no two predictors having high variance in the corresponding variance decomposition matrix row.</p>
<p>We’ll table that variable for now, but note that as we suspected, prenatal care and health insurance status are strongly related to rates of preterm births in NYC neighborhoods, controlling for minority population proportions.</p>
</div>
<div id="gonorrhea" class="section level4">
<h4>Gonorrhea</h4>
</div>
<div id="linear-regression-model-1" class="section level4">
<h4>Linear Regression Model</h4>
<p>Let’s start by fitting a linear model to the gonorrhea outcome variable using our stepwise selection process with AIC. The chosen predictors are indicated in the table below.</p>
<pre class="r"><code>predictors_df = read.csv(&quot;./data/predictors.csv&quot;)
outcome_df = read.csv(&quot;./data/outcomes.csv&quot;)

#Combined predictors with SMM outcome
gonorrhea_df = predictors_df %&gt;% 
  mutate(gonorrhea = outcome_df$gonorrhea) %&gt;%
  dplyr::select(-total_pop)

#Fit the full model 
full_gonorrhea_linear.model &lt;- lm(gonorrhea~., data = gonorrhea_df)
#Stepwise regression model
step_gonorrhea_linear.model &lt;- stepAIC(full_gonorrhea_linear.model, direction = &quot;both&quot;, 
                      trace = FALSE)

#Display converged model
step_gonorrhea_linear.model %&gt;% 
  broom::tidy() %&gt;%
  knitr::kable(digits = 3)</code></pre>
<p>The variables female, hispanic, black, other, limited_eng, education, poverty, medicaid_enroll, late_no_prenatal_care, and clinics_and_chc_density were chosen in the final model. The model has an R-squared value of 0.476492, representing a reasonably good fit.</p>
<p>However, we were concerned about our assumptions for linear regression, so they need to be checked before we can interpret any results.</p>
<pre class="r"><code>#Regression diagnostics
plot(step_gonorrhea_linear.model)</code></pre>
<p><img src="project_report_files/figure-html/unnamed-chunk-13-1.png" width="100%" /><img src="project_report_files/figure-html/unnamed-chunk-13-2.png" width="100%" /><img src="project_report_files/figure-html/unnamed-chunk-13-3.png" width="100%" /><img src="project_report_files/figure-html/unnamed-chunk-13-4.png" width="100%" /></p>
<pre class="r"><code>#Shapiro test
gonorrhea_linear_shapiro = shapiro.test(residuals(step_gonorrhea_linear.model))</code></pre>
<p>The Normal Q-Q plot has fat tails, suggesting violation of the normality assumption. This is confirmed with the Shapiro-Wilk test for normality, which has a p-value of 5.697824910^{-17}. The plot of residuals vs fitted values has non-random variance, suggesting a violation of the homoskedasticity assumption, also indicated by the scale-location plot, where the line is not straight.</p>
<p>We’ll stop this analysis here since it’s clear the model doesn’t follow linear assumptions, but it’s important to note that further analysis would also have to investigate the potential outliers &amp; high leverage points found in the residuals vs. leverage plot.</p>
<p>A quick look at the dataset shows that both these data points, corresponding to the neighborhoods of Clinton (Hell’s Kitchen) and Hudson Yards-Chelsea-Flat Iron-Union Square possess the highest and second highest rates of gonorrhea, respectively. These numbers are at odds with their majority white, affluent, and well-educated residents. We posit it may be because they have high LGBTQ+ populations - prior research suggests that MSM (men who have sex with men) are at much higher risk of STDs than women or heterosexual men.</p>
</div>
<div id="poisson-regression-model-1" class="section level4">
<h4>Poisson Regression Model</h4>
<p>Because our outcome variable, gonorrhea rate is really a count variable (number of cases) made into a rate by dividing by total population (another variable in our dataset), we could run a Poisson regression to model the outcome. Running a Poisson model on gonorrhea case rate approximates fitting a Poisson regression on a gonorrhea count variable, using neighborhood population as an offset.</p>
<pre class="r"><code>full_gonorrhea_poisson.model &lt;- glm(gonorrhea~., data=gonorrhea_df, family=poisson(link = &quot;log&quot;))

step_gonorrhea_poisson.model &lt;- stepAIC(full_gonorrhea_poisson.model, direction = &quot;both&quot;, 
                      trace = FALSE)</code></pre>
<pre class="r"><code>#Display converged model
step_gonorrhea_poisson.model %&gt;% 
  broom::tidy() %&gt;%
  knitr::kable(digits = 3)</code></pre>
<p>Our Poisson model selected 15 predictors in the converged model, suggesting that model is not as well-specified as we would like. This is further indicated by the high dispersion of the model (calculated as deviance/df). A key assumption of Poisson model is that the conditional mean must equal the conditional variance. A dispersion value close to 1 shows the assumption is met, but the dispersion in our model is 45.940339, which indicates that our model is overdispersed.</p>
</div>
<div id="negative-binomial-regression-model-1" class="section level4">
<h4>Negative Binomial Regression Model</h4>
<p>There are several ways to address overdispersion in Poisson models, but for our purposes we will use a negative binomial model, an expansion on the Poisson model that adds a dispersion parameter alpha to account for either over or underdispersion.</p>
<pre class="r"><code>full_gonorrhea_neg_bin.model &lt;- glm.nb(gonorrhea~., data=gonorrhea_df)

step_gonorrhea_neg_bin.model &lt;- stepAIC(full_gonorrhea_neg_bin.model, direction = &quot;both&quot;, 
                      trace = FALSE)

#Display converged model
step_gonorrhea_neg_bin.model %&gt;% 
  broom::tidy() %&gt;%
  knitr::kable(digits = 3)</code></pre>
<p>The negative binomial model selection process has yielded a more parsimonious set of predictors, including 8 predictors: female, hispanic, black, other, limited_eng, education, poverty, medicaid_enroll, late_no_prenatal_care and non_pcmd_density.</p>
<p>This is much better! The model is more parsimonious, and satisfies assumptions, which is not necessarily true for the linear and Poisson models. Let’s compare the three models using AIC:</p>
<ul>
<li>Linear: AIC = 2209.5396526</li>
<li>Poisson: AIC = Inf</li>
<li>Negative binomial: AIC = 2027.4706595</li>
</ul>
<p>The negative binomial model is slightly better than the linear model, and both the linear and negative binomial models are much better than the Poisson model. Since we’ve established AIC as our criteria, we’ll use the negative binomial model as our final model moving forward.</p>
</div>
<div id="discussion-2" class="section level4">
<h4>Discussion</h4>
<p>Our final model shows that female, hispanic, black, other, limited_eng, education, poverty, medicaid_enroll, late_no_prenatal_care and non_pcmd_density are important predictors of gonorrhea rates by neighborhood.</p>
<p>We should assess for multicollinearity in our fitted model using condition indexes and a variance decomposition matrix.</p>
<pre class="r"><code>gonorrhea_coll = colldiag(step_gonorrhea_neg_bin.model)

knitr::kable(list(gonorrhea_coll$condindx, gonorrhea_coll$pi))</code></pre>
<p>Though some of our condition indices are very very large, it is difficult to identify exactly which predictors are contributing to this multicollinearity from the variance decomposition matrix. It appears that poverty and medicaid enrollment, as well as hispanic and education, may be collinear pairs in this model. Though this is not ideal, it does not detract from the results of our regression if we leave them together in the model as control variables.</p>
</div>
</div>
</div>
<div id="results-discussion" class="section level2">
<h2>Results &amp; Discussion</h2>
<p>These exploratory visualizations demonstrate the importance of access to care and socioeconomic factors to the health of mothers. From our exploratory analyses, we found that poverty and late or no access to prenatal care are strong predictors of our outcomes, with direct, positive relationships. These results are supported by our negative binomial regression analysis that found statistically significant p-values for the variables of late or no prenatal care and poverty. Race appears to modify the relationship between prenatal care access and SMM. Among populations with greater percent of Hispanic and Black individuals, there were higher rates of SMM as the percentage of low or no prenatal care rose. However, among populations with greater percent of White individuals, levels of late or no prenatal access and SMM were both low. These observations are supported by our negative binomial regression modeling which found statistically significant, direct associations between the race variables of Hispanic and Black populations and SMM, while the association between the variable of White population and SMM was negative. These findings support our literature review findings, highlighting the importance of access to care, income level, and race on health outcomes.</p>
<pre class="r"><code>poverty2_smm_ggplot = 
  plots_df %&gt;% 
  ggplot(aes(x = poverty_level, y = smm)) + 
  geom_boxplot() + 
  labs(
    title = &quot;Poverty Levels and Maternal Morbidity in NYC Neighborhoods&quot;,
    x = &quot;Grouped percentage population below federal poverty level&quot;,
    y = &quot;Rate of SMM per 10,000 deliveries&quot;)

ggplotly(poverty2_smm_ggplot)


prenatal_care_ggplot = 
  plots_df %&gt;% 
  ggplot(aes(x = late_no_prenatal_care, y = preterm_births, group = nta_name)) + 
  geom_point(color = &quot;blue&quot;) + 
  labs(
    title = &quot;Access to Prenatal Care and Preterm Births in NYC Neighborhoods&quot;,
    x = &quot;Percent live births recieving late or no prenatal care&quot;,
    y = &quot;Percent preterm births among all live births&quot;)

ggplotly(prenatal_care_ggplot)</code></pre>
<p>While health insurance coverage did not appear to be a strong predictor of preterm births or gonorrhea, the rate of Medicaid enrollment was positively associated with these outcomes. We speculate that those covered by private insurance tend to be healthier and wealthier than those insured by Medicaid, potentially predisposing Medicaid enrollees to worse health outcomes. Another potential reason for the discrepancy between health insurance types is the consequences of cost-sharing. Patients under plans with greater cost-sharing and higher deductibles tend to seek lower amounts of necessary care, which would create negative consequences for those who are poor and sick. This postulation may also help explain the strong influence of the predictor late or no access to prenatal care upon the outcomes of SMM and preterm births. Pregnant mothers who experience poverty, bear more out-of-pocket prenatal care costs, and are in need of healthcare may receive crucial prenatal care belatedly or forgo it altogether, resulting in higher rates of SMM and preterm births.</p>
<pre class="r"><code>gonorrhea1_ggplot = 
  plots_df %&gt;% 
  ggplot(aes(x = health_ins, y = gonorrhea, group = nta_name)) + 
  geom_point(color = &quot;green&quot;) + 
  labs(
    title = &quot;Health Insurance and  Gonorrhea in NYC Neighborhoods (2014-2015)&quot;,
    x = &quot;Percent population with health insurance&quot;,
    y = &quot;Rate of gonorrhea cases per 100,000 people&quot;)

ggplotly(gonorrhea1_ggplot)


gonorrhea2_ggplot = 
  plots_df %&gt;% 
  ggplot(aes(x = medicaid_enroll, y = gonorrhea, group = nta_name)) +
  geom_point(color = &quot;green&quot;) + 
  labs(
    title = &quot;Medicaid Enrollment and Gonorrhea in NYC Neighborhoods (2014-2015)&quot;,
    x = &quot;Percent population enrolled in Medicaid&quot;,
    y = &quot;Rate of gonorrhea cases per 100,000 people&quot;)

ggplotly(gonorrhea2_ggplot)</code></pre>
<p>We hypothesized that education would be a significant predictor of STI levels, specifically gonorrhea, which was our STI focus. From previous understanding and literature review, individuals with higher levels of education tend to practice safer sex methods and develop lower rates of STIs. Following that reasoning, we expected to see a strong association between the percentage of population with less than high school education and the rate of gonorrhea, where neighborhoods with higher percentages of the population with low education levels would see higher rates of gonorrhea. While a small, positive relationship between the variables does exist, it is a much weaker association than expected, with numerous outliers. We speculate that this weak association may be caused by the tendency of sexual education being taught at the middle school level and that the amount of safe sex practice knowledge may not be as different as we expected between the less-than-high-school level of education and higher education. Additionally, we hypothesize that the outliers of low percent of less-than-high-school education but high gonorrhea rates may be influenced by the large number of LGBTQ+ residents in those neighborhoods. We do not want to make assumptions about these marginalized communities who already experience a heavy burden from stigmatization. But in an attempt to understand potential causes for these data points, we will draw some tentative connections. From <a href="about_project.html">subsequent literature review</a>, we have seen that people identifying as LGBTQ+ have higher rates of STI’s, whether as a result of lower condom usage following increased use of pre-exposure prophylaxis (PrEP) or due to a general, greater willingness to receive STI testing. This may artificially inflate the rate of gonorrhea in these neighborhoods since we have not tested and controlled for the variation of STI testing among different neighborhoods. Furthermore, we found that when stratifying the relationship between education and gonorrhea by race, there was a similar output to when we stratified the relationship between prenatal care and SMM. Populations with higher percent of Hispanic and Black individuals demonstrated higher levels of gonorrhea compared to populations with higher percent of White individuals. These findings were supported by the inclusion of Hispanic and Black race variables in the final fitted negative binomial regression model.</p>
<p>Our analyses show that significant disparities in reproductive and maternal health outcomes still remain among NYC neighborhoods, and they are highly correlated with sociodemographic characteristics. Public health interventions in this field are exceedingly necessary, especially given shifts in current events.</p>
<pre class="r"><code>gonorrhea3_ggplot = 
  plots_df %&gt;% 
  ggplot(aes(x = education, y = gonorrhea, group = nta_name)) +
  geom_point(color = &quot;green&quot;) + 
  labs(
    title = &quot;Education Level and Gonorrhea in NYC Neighborhoods (2014-2015)&quot;,
    x = &quot;Percent population with less than high school education&quot;,
    y = &quot;Rate of gonorrhea cases per 100,000 people&quot;)


ggplotly(gonorrhea3_ggplot)</code></pre>
</div>
<div id="acknowledgements" class="section level2">
<h2>Acknowledgements</h2>
<p>Special thanks to:</p>
<ul>
<li>Professor Qixuan Chen &amp; Dr. Dan Liao for their statistics expertise</li>
<li>Dr. Jeremy Porter for his advice on geospatial information systems (GIS)</li>
<li>Jeff and the P8105 course staff (with special thanks to our TA, Junxian Chen) for showing us the endless possibilities of R</li>
<li>The extraordinary, powerful, nasty women who inspire us every day</li>
</ul>
</div>

<hr>

<br>

<p align="center">

<small>

Ayeshra Acharya, Zaynub Ibrahim, Cynthia Liu, Shelley Shen

<p align="center">
Data visualizations and analyses performed using <a href="https://rstudio.com">RStudio</a> (v1.3.1093-1) and <a href ="https://qgis.org/en/site/">QGIS</a> (v3.16 1 'Hannover'). 

<br>

Interaction added to visualizations with <a href="https://plot.ly/">plotly</a> (v1.55.2). </p>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
